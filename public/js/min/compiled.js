!function n(t,e,r){function a(i,u){if(!e[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var s=e[i]={exports:{}};t[i][0].call(s.exports,function(n){var e=t[i][1][n];return a(e?e:n)},s,s.exports,n,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(n,t,e){var r="map-canvas",a=n("./lib/geo_lit"),o=n("../config");a.init(r,function(n){console.log(n?n:"map initialzed")});var i=n("./components/addPlaceForm.jsx"),u=n("./components/comments.jsx"),c=React.createClass({displayName:"Main",componentDidMount:function(){var n=this;$(document).on("geo-lit-place-click",function(t,e){n.setState({activeComponent:"comments",placeId:e._id,placeTitle:e.title})})},getInitialState:function(){return{activeComponent:"addPlaceForm",placeId:null,userId:1}},render:function(){return React.createElement("div",null,React.createElement(i,{activeComponent:this.state.activeComponent}),React.createElement(u,{activeComponent:this.state.activeComponent,endpoint:o.commentEndpoint,placeId:this.state.placeId,placeTitle:this.state.placeTitle,userId:this.state.userId}))}});React.render(React.createElement(c,null),document.getElementById("content"))},{"../config":7,"./components/addPlaceForm.jsx":2,"./components/comments.jsx":3,"./lib/geo_lit":4}],2:[function(n,t,e){var r=(n("../lib/services.js"),n("../lib/geo_lit.js"));t.exports=React.createClass({displayName:"exports",addPlace:function(n){var t=this;n.preventDefault(),r.addPlace(this.state.placeValue,function(n){n?t.setState({errorMessage:n}):console.log(t.state.placeValue+" added.")})},getInitialState:function(){return{placeValue:"",errorMessage:""}},render:function(){var n="js-add-place button expand";return React.createElement("div",null,React.createElement("div",null,this.state.errorMessage),React.createElement("form",null,React.createElement("div",{className:"row"},React.createElement("div",{className:"small-12 columns"},React.createElement("input",{type:"text",name:"title",placeholder:"Title",value:this.state.placeValue,onChange:this.updatePlaceValue}),React.createElement("a",{href:"javascript:void(0)",onClick:this.addPlace,className:n},"Add Place")))))},updatePlaceValue:function(n){this.setState({placeValue:n.target.value})}})},{"../lib/geo_lit.js":4,"../lib/services.js":5}],3:[function(n,t,e){{var r=n("underscore");n("../lib/services.js"),n("../lib/geo_lit.js")}t.exports=React.createClass({displayName:"exports",addComment:function(n,t){var e=this,r=e.props.endpoint+"/comment/"+e.props.placeId+"/"+n;$.ajax({type:"POST",url:r,data:{comment:t,userId:this.props.userId},success:function(n){"success"!==n.status?console.log(n):(e.setState({hasLoaded:!1}),e.loadComments(e.props.placeId))},error:function(n){console.log(n)},dataType:"JSON"})},cleanComments:function(n){var t=this;r.each(n,function(n){n.addComment=t.addComment,0!==n.children.length&&t.cleanComments(n.children)})},componentWillReceiveProps:function(n){n.placeId!==this.props.placeId&&(this.loadComments(n.placeId),this.setState({hasLoaded:!1}))},getInitialState:function(){return{hasLoaded:!1,comments:[]}},loadComments:function(n){var t=this;$.ajax({type:"GET",url:t.props.endpoint+"/comments-formatted/"+n,success:function(n){"success"!==n.status?console.log(n):(t.cleanComments(n.data),t.setState({comments:n.data,hasLoaded:!0}))},error:function(n){console.log(n)},dataType:"JSON"})},render:function(){return"comments"===this.props.activeComponent&&this.state.hasLoaded?React.createElement("div",null,React.createElement(a,{comments:[{parent:0,children:[],comment:"",addComment:this.addComment}]}),React.createElement("h2",null," "),React.createElement(a,{comments:this.state.comments})):React.createElement("div",null," ")},updatePlaceValue:function(n){this.setState({placeValue:n.target.value})}});var a=React.createClass({displayName:"Comments",render:function(){var n=this.props.comments.map(function(n,t){var e=!1;null===n.comment&&(e=!0);var r="";return 0!==n.children.length&&(r=React.createElement(a,{comments:n.children})),React.createElement(o,{parent:n.id,childrenElement:r,children:n.children,comment:n.comment,addComment:n.addComment,key:t})});return React.createElement("div",null,n)},updateComment:function(n){this.setState({comment:n.target.value})}}),o=React.createClass({displayName:"Comment",getInitialState:function(){return{comment:""}},handleSubmit:function(){event.preventDefault(),this.props.addComment(this.props.parent,this.state.comment),console.log(this.state.comment)},render:function(){var n=this;return React.createElement("div",{className:"sql-comment-container"},React.createElement("div",null,this.props.comment),React.createElement("textarea",{placeholder:"Add Comment",onChange:n.updateComment,value:n.state.comment}),React.createElement("button",{href:"javascript:null;",className:"button small",onClick:n.handleSubmit}," Submit"),React.createElement("div",null,this.props.childrenElement))},updateComment:function(n){this.setState({comment:n.target.value})}})},{"../lib/geo_lit.js":4,"../lib/services.js":5,underscore:8}],4:[function(n,t,e){var r={},a=n("underscore"),o=n("./user"),i=n("./services"),u=5,c=!1,l=.1,s="You must be logged in.";r.map=null,r.currentLatitude=null,r.currentLongitude=null,r.mapFollow=!0,r.intervalId=null,r.intervalTime=5e3,r.mapId=null,r.placeMarkers={},r.userMarker=null,r.zoomLevel=12,r.createMap=function(){var n={zoom:r.zoomLevel,center:new google.maps.LatLng(r.currentLatitude,r.currentLongitude)};r.map=new google.maps.Map(document.getElementById(r.mapId),n)},r.getPosition=function(n){navigator.geolocation.getCurrentPosition(function(t){n(null,{latitude:t.coords.latitude,longitude:t.coords.longitude})},n)},r.init=function(n,t){r.mapId=n,google.maps.event.addDomListener(window,"load",function(){r.updatePosition(function(n){n?t(n):(r.createMap(),r.updateUserMarker(),r.intervalId=window.setInterval(r.intervalCallback,r.intervalTime),t())})})},r.updatePosition=function(n){navigator.geolocation.getCurrentPosition(function(t){r.currentLatitude=t.coords.latitude,r.currentLongitude=t.coords.longitude,n()},n)},r.addPlacesToMap=function(n){a.each(n,function(n){var t=new google.maps.LatLng(n.location[1],n.location[0]);r.placeMarkers[n._id]=new google.maps.Marker({position:t,map:r.map,title:"TEST TITLE",geoLit:{_id:n._id,title:"TEST TITLE"}}),google.maps.event.addListener(r.placeMarkers[n._id],"click",function(){$(document).trigger("geo-lit-place-click",[this.geoLit])})})},r.updatePlaces=function(n){i.findNear({latitude:r.currentLatitude,longitude:r.currentLongitude,range:u},function(n,t){var e=a.filter(t,function(n){return"undefined"==typeof r.placeMarkers[n._id]});r.addPlacesToMap(e)})},r.updateUserMarker=function(){null!==r.userMarker&&r.userMarker.setMap(null);var n=new google.maps.LatLng(r.currentLatitude+.002,r.currentLongitude+.002);r.userMarker=new google.maps.Marker({position:n,map:r.map,title:"Current Position"}),r.mapFollow&&r.recenterMap()},r.recenterMap=function(){var n=new google.maps.LatLng(r.currentLatitude,r.currentLongitude);r.map.panTo(n)},r.intervalCallback=function(){var n=!0;r.updatePosition(function(t){return c&&(r.currentLatitude+=Math.random()*l,r.currentLongitude+=Math.random()*l),t?void console.log(t):(r.updateUserMarker(),void(n&&r.updatePlaces(function(n){n&&console.log(n)})))})},r.addPlace=function(n,t){return o.isLoggedIn?void r.getPosition(function(e,r){if(e)return void t("Unable to find location.");var a={};a.location=[r.longitude,r.latitude],a.title=n,a.user=o.id,i.add(a,function(n,e){n?t(n):t()})}):void t(s)},t.exports=r},{"./services":5,"./user":6,underscore:8}],5:[function(n,t,e){var r={},a=n("../../config.js"),o="A server error occurred.";r.add=function(n,t){$.ajax({type:"POST",url:a.geoLitEndpoint+"/position",data:n,success:function(n){"success"===n.status?t():t(n.errorMessage)},error:function(n){console.log(n),t(o)},dataType:"JSON"})},r.findNear=function(n,t){$.ajax({type:"GET",url:a.geoLitEndpoint+"/positions-near",data:n,success:function(n){"success"!==n.status?t(n.errorMessage):t(null,n.data)},error:function(n){console.log(n),t(o)},dataType:"JSON"})},t.exports=r},{"../../config.js":7}],6:[function(n,t,e){var r={};r.data={},r.isLoggedIn=!0,r.id=777,t.exports=r},{}],7:[function(n,t,e){var r={};r.environment=-1!==window.location.href.toLowerCase().indexOf("localhost")?"development":"production","development"===r.environment&&(r.geoLitEndpoint="http://localhost:3000"),r.commentEndpoint=r.geoLitEndpoint+"/discussion",t.exports=r},{}],8:[function(n,t,e){(function(){function n(n){function t(t,e,r,a,o,i){for(;o>=0&&i>o;o+=n){var u=a?a[o]:o;r=e(r,t[u],u,t)}return r}return function(e,r,a,o){r=j(r,o,4);var i=!C(e)&&x.keys(e),u=(i||e).length,c=n>0?0:u-1;return arguments.length<3&&(a=e[i?i[c]:c],c+=n),t(e,r,a,i,c,u)}}function r(n){return function(t,e,r){e=E(e,r);for(var a=M(t),o=n>0?0:a-1;o>=0&&a>o;o+=n)if(e(t[o],o,t))return o;return-1}}function a(n,t,e){return function(r,a,o){var i=0,u=M(r);if("number"==typeof o)n>0?i=o>=0?o:Math.max(o+u,i):u=o>=0?Math.min(o+1,u):o+u+1;else if(e&&o&&u)return o=e(r,a),r[o]===a?o:-1;if(a!==a)return o=t(p.call(r,i,u),x.isNaN),o>=0?o+i:-1;for(o=n>0?i:u-1;o>=0&&u>o;o+=n)if(r[o]===a)return o;return-1}}function o(n,t){var e=T.length,r=n.constructor,a=x.isFunction(r)&&r.prototype||l,o="constructor";for(x.has(n,o)&&!x.contains(t,o)&&t.push(o);e--;)o=T[e],o in n&&n[o]!==a[o]&&!x.contains(t,o)&&t.push(o)}var i=this,u=i._,c=Array.prototype,l=Object.prototype,s=Function.prototype,f=c.push,p=c.slice,d=l.toString,m=l.hasOwnProperty,v=Array.isArray,h=Object.keys,g=s.bind,y=Object.create,b=function(){},x=function(n){return n instanceof x?n:this instanceof x?void(this._wrapped=n):new x(n)};"undefined"!=typeof e?("undefined"!=typeof t&&t.exports&&(e=t.exports=x),e._=x):i._=x,x.VERSION="1.8.3";var j=function(n,t,e){if(void 0===t)return n;switch(null==e?3:e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,a){return n.call(t,e,r,a)};case 4:return function(e,r,a,o){return n.call(t,e,r,a,o)}}return function(){return n.apply(t,arguments)}},E=function(n,t,e){return null==n?x.identity:x.isFunction(n)?j(n,t,e):x.isObject(n)?x.matcher(n):x.property(n)};x.iteratee=function(n,t){return E(n,t,1/0)};var w=function(n,t){return function(e){var r=arguments.length;if(2>r||null==e)return e;for(var a=1;r>a;a++)for(var o=arguments[a],i=n(o),u=i.length,c=0;u>c;c++){var l=i[c];t&&void 0!==e[l]||(e[l]=o[l])}return e}},_=function(n){if(!x.isObject(n))return{};if(y)return y(n);b.prototype=n;var t=new b;return b.prototype=null,t},k=function(n){return function(t){return null==t?void 0:t[n]}},L=Math.pow(2,53)-1,M=k("length"),C=function(n){var t=M(n);return"number"==typeof t&&t>=0&&L>=t};x.each=x.forEach=function(n,t,e){t=j(t,e);var r,a;if(C(n))for(r=0,a=n.length;a>r;r++)t(n[r],r,n);else{var o=x.keys(n);for(r=0,a=o.length;a>r;r++)t(n[o[r]],o[r],n)}return n},x.map=x.collect=function(n,t,e){t=E(t,e);for(var r=!C(n)&&x.keys(n),a=(r||n).length,o=Array(a),i=0;a>i;i++){var u=r?r[i]:i;o[i]=t(n[u],u,n)}return o},x.reduce=x.foldl=x.inject=n(1),x.reduceRight=x.foldr=n(-1),x.find=x.detect=function(n,t,e){var r;return r=C(n)?x.findIndex(n,t,e):x.findKey(n,t,e),void 0!==r&&-1!==r?n[r]:void 0},x.filter=x.select=function(n,t,e){var r=[];return t=E(t,e),x.each(n,function(n,e,a){t(n,e,a)&&r.push(n)}),r},x.reject=function(n,t,e){return x.filter(n,x.negate(E(t)),e)},x.every=x.all=function(n,t,e){t=E(t,e);for(var r=!C(n)&&x.keys(n),a=(r||n).length,o=0;a>o;o++){var i=r?r[o]:o;if(!t(n[i],i,n))return!1}return!0},x.some=x.any=function(n,t,e){t=E(t,e);for(var r=!C(n)&&x.keys(n),a=(r||n).length,o=0;a>o;o++){var i=r?r[o]:o;if(t(n[i],i,n))return!0}return!1},x.contains=x.includes=x.include=function(n,t,e,r){return C(n)||(n=x.values(n)),("number"!=typeof e||r)&&(e=0),x.indexOf(n,t,e)>=0},x.invoke=function(n,t){var e=p.call(arguments,2),r=x.isFunction(t);return x.map(n,function(n){var a=r?t:n[t];return null==a?a:a.apply(n,e)})},x.pluck=function(n,t){return x.map(n,x.property(t))},x.where=function(n,t){return x.filter(n,x.matcher(t))},x.findWhere=function(n,t){return x.find(n,x.matcher(t))},x.max=function(n,t,e){var r,a,o=-(1/0),i=-(1/0);if(null==t&&null!=n){n=C(n)?n:x.values(n);for(var u=0,c=n.length;c>u;u++)r=n[u],r>o&&(o=r)}else t=E(t,e),x.each(n,function(n,e,r){a=t(n,e,r),(a>i||a===-(1/0)&&o===-(1/0))&&(o=n,i=a)});return o},x.min=function(n,t,e){var r,a,o=1/0,i=1/0;if(null==t&&null!=n){n=C(n)?n:x.values(n);for(var u=0,c=n.length;c>u;u++)r=n[u],o>r&&(o=r)}else t=E(t,e),x.each(n,function(n,e,r){a=t(n,e,r),(i>a||a===1/0&&o===1/0)&&(o=n,i=a)});return o},x.shuffle=function(n){for(var t,e=C(n)?n:x.values(n),r=e.length,a=Array(r),o=0;r>o;o++)t=x.random(0,o),t!==o&&(a[o]=a[t]),a[t]=e[o];return a},x.sample=function(n,t,e){return null==t||e?(C(n)||(n=x.values(n)),n[x.random(n.length-1)]):x.shuffle(n).slice(0,Math.max(0,t))},x.sortBy=function(n,t,e){return t=E(t,e),x.pluck(x.map(n,function(n,e,r){return{value:n,index:e,criteria:t(n,e,r)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return n.index-t.index}),"value")};var I=function(n){return function(t,e,r){var a={};return e=E(e,r),x.each(t,function(r,o){var i=e(r,o,t);n(a,r,i)}),a}};x.groupBy=I(function(n,t,e){x.has(n,e)?n[e].push(t):n[e]=[t]}),x.indexBy=I(function(n,t,e){n[e]=t}),x.countBy=I(function(n,t,e){x.has(n,e)?n[e]++:n[e]=1}),x.toArray=function(n){return n?x.isArray(n)?p.call(n):C(n)?x.map(n,x.identity):x.values(n):[]},x.size=function(n){return null==n?0:C(n)?n.length:x.keys(n).length},x.partition=function(n,t,e){t=E(t,e);var r=[],a=[];return x.each(n,function(n,e,o){(t(n,e,o)?r:a).push(n)}),[r,a]},x.first=x.head=x.take=function(n,t,e){return null==n?void 0:null==t||e?n[0]:x.initial(n,n.length-t)},x.initial=function(n,t,e){return p.call(n,0,Math.max(0,n.length-(null==t||e?1:t)))},x.last=function(n,t,e){return null==n?void 0:null==t||e?n[n.length-1]:x.rest(n,Math.max(0,n.length-t))},x.rest=x.tail=x.drop=function(n,t,e){return p.call(n,null==t||e?1:t)},x.compact=function(n){return x.filter(n,x.identity)};var S=function(n,t,e,r){for(var a=[],o=0,i=r||0,u=M(n);u>i;i++){var c=n[i];if(C(c)&&(x.isArray(c)||x.isArguments(c))){t||(c=S(c,t,e));var l=0,s=c.length;for(a.length+=s;s>l;)a[o++]=c[l++]}else e||(a[o++]=c)}return a};x.flatten=function(n,t){return S(n,t,!1)},x.without=function(n){return x.difference(n,p.call(arguments,1))},x.uniq=x.unique=function(n,t,e,r){x.isBoolean(t)||(r=e,e=t,t=!1),null!=e&&(e=E(e,r));for(var a=[],o=[],i=0,u=M(n);u>i;i++){var c=n[i],l=e?e(c,i,n):c;t?(i&&o===l||a.push(c),o=l):e?x.contains(o,l)||(o.push(l),a.push(c)):x.contains(a,c)||a.push(c)}return a},x.union=function(){return x.uniq(S(arguments,!0,!0))},x.intersection=function(n){for(var t=[],e=arguments.length,r=0,a=M(n);a>r;r++){var o=n[r];if(!x.contains(t,o)){for(var i=1;e>i&&x.contains(arguments[i],o);i++);i===e&&t.push(o)}}return t},x.difference=function(n){var t=S(arguments,!0,!0,1);return x.filter(n,function(n){return!x.contains(t,n)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(n){for(var t=n&&x.max(n,M).length||0,e=Array(t),r=0;t>r;r++)e[r]=x.pluck(n,r);return e},x.object=function(n,t){for(var e={},r=0,a=M(n);a>r;r++)t?e[n[r]]=t[r]:e[n[r][0]]=n[r][1];return e},x.findIndex=r(1),x.findLastIndex=r(-1),x.sortedIndex=function(n,t,e,r){e=E(e,r,1);for(var a=e(t),o=0,i=M(n);i>o;){var u=Math.floor((o+i)/2);e(n[u])<a?o=u+1:i=u}return o},x.indexOf=a(1,x.findIndex,x.sortedIndex),x.lastIndexOf=a(-1,x.findLastIndex),x.range=function(n,t,e){null==t&&(t=n||0,n=0),e=e||1;for(var r=Math.max(Math.ceil((t-n)/e),0),a=Array(r),o=0;r>o;o++,n+=e)a[o]=n;return a};var R=function(n,t,e,r,a){if(!(r instanceof t))return n.apply(e,a);var o=_(n.prototype),i=n.apply(o,a);return x.isObject(i)?i:o};x.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,p.call(arguments,1));if(!x.isFunction(n))throw new TypeError("Bind must be called on a function");var e=p.call(arguments,2),r=function(){return R(n,r,t,this,e.concat(p.call(arguments)))};return r},x.partial=function(n){var t=p.call(arguments,1),e=function(){for(var r=0,a=t.length,o=Array(a),i=0;a>i;i++)o[i]=t[i]===x?arguments[r++]:t[i];for(;r<arguments.length;)o.push(arguments[r++]);return R(n,e,this,this,o)};return e},x.bindAll=function(n){var t,e,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)e=arguments[t],n[e]=x.bind(n[e],n);return n},x.memoize=function(n,t){var e=function(r){var a=e.cache,o=""+(t?t.apply(this,arguments):r);return x.has(a,o)||(a[o]=n.apply(this,arguments)),a[o]};return e.cache={},e},x.delay=function(n,t){var e=p.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(n,t,e){var r,a,o,i=null,u=0;e||(e={});var c=function(){u=e.leading===!1?0:x.now(),i=null,o=n.apply(r,a),i||(r=a=null)};return function(){var l=x.now();u||e.leading!==!1||(u=l);var s=t-(l-u);return r=this,a=arguments,0>=s||s>t?(i&&(clearTimeout(i),i=null),u=l,o=n.apply(r,a),i||(r=a=null)):i||e.trailing===!1||(i=setTimeout(c,s)),o}},x.debounce=function(n,t,e){var r,a,o,i,u,c=function(){var l=x.now()-i;t>l&&l>=0?r=setTimeout(c,t-l):(r=null,e||(u=n.apply(o,a),r||(o=a=null)))};return function(){o=this,a=arguments,i=x.now();var l=e&&!r;return r||(r=setTimeout(c,t)),l&&(u=n.apply(o,a),o=a=null),u}},x.wrap=function(n,t){return x.partial(t,n)},x.negate=function(n){return function(){return!n.apply(this,arguments)}},x.compose=function(){var n=arguments,t=n.length-1;return function(){for(var e=t,r=n[t].apply(this,arguments);e--;)r=n[e].call(this,r);return r}},x.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},x.before=function(n,t){var e;return function(){return--n>0&&(e=t.apply(this,arguments)),1>=n&&(t=null),e}},x.once=x.partial(x.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(n){if(!x.isObject(n))return[];if(h)return h(n);var t=[];for(var e in n)x.has(n,e)&&t.push(e);return O&&o(n,t),t},x.allKeys=function(n){if(!x.isObject(n))return[];var t=[];for(var e in n)t.push(e);return O&&o(n,t),t},x.values=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),a=0;e>a;a++)r[a]=n[t[a]];return r},x.mapObject=function(n,t,e){t=E(t,e);for(var r,a=x.keys(n),o=a.length,i={},u=0;o>u;u++)r=a[u],i[r]=t(n[r],r,n);return i},x.pairs=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),a=0;e>a;a++)r[a]=[t[a],n[t[a]]];return r},x.invert=function(n){for(var t={},e=x.keys(n),r=0,a=e.length;a>r;r++)t[n[e[r]]]=e[r];return t},x.functions=x.methods=function(n){var t=[];for(var e in n)x.isFunction(n[e])&&t.push(e);return t.sort()},x.extend=w(x.allKeys),x.extendOwn=x.assign=w(x.keys),x.findKey=function(n,t,e){t=E(t,e);for(var r,a=x.keys(n),o=0,i=a.length;i>o;o++)if(r=a[o],t(n[r],r,n))return r},x.pick=function(n,t,e){var r,a,o={},i=n;if(null==i)return o;x.isFunction(t)?(a=x.allKeys(i),r=j(t,e)):(a=S(arguments,!1,!1,1),r=function(n,t,e){return t in e},i=Object(i));for(var u=0,c=a.length;c>u;u++){var l=a[u],s=i[l];r(s,l,i)&&(o[l]=s)}return o},x.omit=function(n,t,e){if(x.isFunction(t))t=x.negate(t);else{var r=x.map(S(arguments,!1,!1,1),String);t=function(n,t){return!x.contains(r,t)}}return x.pick(n,t,e)},x.defaults=w(x.allKeys,!0),x.create=function(n,t){var e=_(n);return t&&x.extendOwn(e,t),e},x.clone=function(n){return x.isObject(n)?x.isArray(n)?n.slice():x.extend({},n):n},x.tap=function(n,t){return t(n),n},x.isMatch=function(n,t){var e=x.keys(t),r=e.length;if(null==n)return!r;for(var a=Object(n),o=0;r>o;o++){var i=e[o];if(t[i]!==a[i]||!(i in a))return!1}return!0};var A=function(n,t,e,r){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof x&&(n=n._wrapped),t instanceof x&&(t=t._wrapped);var a=d.call(n);if(a!==d.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var o="[object Array]"===a;if(!o){if("object"!=typeof n||"object"!=typeof t)return!1;var i=n.constructor,u=t.constructor;if(i!==u&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(u)&&u instanceof u)&&"constructor"in n&&"constructor"in t)return!1}e=e||[],r=r||[];for(var c=e.length;c--;)if(e[c]===n)return r[c]===t;if(e.push(n),r.push(t),o){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!A(n[c],t[c],e,r))return!1}else{var l,s=x.keys(n);if(c=s.length,x.keys(t).length!==c)return!1;for(;c--;)if(l=s[c],!x.has(t,l)||!A(n[l],t[l],e,r))return!1}return e.pop(),r.pop(),!0};x.isEqual=function(n,t){return A(n,t)},x.isEmpty=function(n){return null==n?!0:C(n)&&(x.isArray(n)||x.isString(n)||x.isArguments(n))?0===n.length:0===x.keys(n).length},x.isElement=function(n){return!(!n||1!==n.nodeType)},x.isArray=v||function(n){return"[object Array]"===d.call(n)},x.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){x["is"+n]=function(t){return d.call(t)==="[object "+n+"]"}}),x.isArguments(arguments)||(x.isArguments=function(n){return x.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(n){return"function"==typeof n||!1}),x.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},x.isNaN=function(n){return x.isNumber(n)&&n!==+n},x.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===d.call(n)},x.isNull=function(n){return null===n},x.isUndefined=function(n){return void 0===n},x.has=function(n,t){return null!=n&&m.call(n,t)},x.noConflict=function(){return i._=u,this},x.identity=function(n){return n},x.constant=function(n){return function(){return n}},x.noop=function(){},x.property=k,x.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},x.matcher=x.matches=function(n){return n=x.extendOwn({},n),function(t){return x.isMatch(t,n)}},x.times=function(n,t,e){var r=Array(Math.max(0,n));t=j(t,e,1);for(var a=0;n>a;a++)r[a]=t(a);return r},x.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},x.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=x.invert(N),F=function(n){var t=function(t){return n[t]},e="(?:"+x.keys(n).join("|")+")",r=RegExp(e),a=RegExp(e,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(a,t):n}};x.escape=F(N),x.unescape=F(P),x.result=function(n,t,e){var r=null==n?void 0:n[t];return void 0===r&&(r=e),x.isFunction(r)?r.call(n):r};var q=0;x.uniqueId=function(n){var t=++q+"";return n?n+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,z=function(n){return"\\"+D[n]};x.template=function(n,t,e){!t&&e&&(t=e),t=x.defaults({},t,x.templateSettings);var r=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),a=0,o="__p+='";n.replace(r,function(t,e,r,i,u){return o+=n.slice(a,u).replace(V,z),a=u+t.length,e?o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var i=new Function(t.variable||"obj","_",o)}catch(u){throw u.source=o,u}var c=function(n){return i.call(this,n,x)},l=t.variable||"obj";return c.source="function("+l+"){\n"+o+"}",c},x.chain=function(n){var t=x(n);return t._chain=!0,t};var U=function(n,t){return n._chain?x(t).chain():t};x.mixin=function(n){x.each(x.functions(n),function(t){var e=x[t]=n[t];x.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),U(this,e.apply(x,n))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=c[n];x.prototype[n]=function(){var e=this._wrapped;return t.apply(e,arguments),"shift"!==n&&"splice"!==n||0!==e.length||delete e[0],U(this,e)}}),x.each(["concat","join","slice"],function(n){var t=c[n];x.prototype[n]=function(){return U(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this)},{}]},{},[1]);